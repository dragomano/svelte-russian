---
title: Сборка вашего приложения
origin: https://svelte.dev/docs/kit/building-your-app
sidebar:
  order: 0
---

Создание приложения на SvelteKit происходит в два этапа, оба из которых выполняются при запуске команды `vite build` (обычно через `npm run build`).

На первом этапе Vite создаёт оптимизированную сборку для продакшена, включающую код сервера, код для браузера и, при наличии, сервис-воркер. На этом этапе выполняется [предварительный рендеринг](/kit/core-concepts/page-options/#prerender), если это уместно.

На втором этапе _адаптер_ берёт эту сборку и настраивает её под целевую среду — подробнее об этом на следующих страницах.

## Во время сборки

SvelteKit загружает ваши файлы `+page/layout(.server).js` (и все импортируемые ими файлы) для анализа во время сборки. Любой код, который _не должен_ выполняться на этом этапе, должен проверять, что значение `building` из модуля [`$app/environment`](https://svelte.dev/docs/kit/$app-environment) равно `false`:

```diff lang="js"
+import { building } from '$app/environment';
import { setupMyDatabase } from '$lib/server/database';

+if (!building) {
  setupMyDatabase();
+}

export function load() {
  // ...
}
```

## Предпросмотр вашего приложения

После сборки вы можете локально просмотреть продакшен-версию приложения с помощью команды `vite preview` (через `npm run preview`). Обратите внимание, что приложение будет запущено на Node, поэтому это не полная имитация вашего развёрнутого приложения — адаптер-специфичные настройки, такие как объект [`platform`](/kit/build-and-deploy/adapters#контекст-специфичный-для-платформы), не применяются при предпросмотре.
